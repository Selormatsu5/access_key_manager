{% extends 'keys/dashboard_base.html' %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Dashboard{% endblock %}</title>
    <!--link rel="stylesheet" href="{% static 'styles/dashboard.css' %}"-->
</head>
<body>
    <div class="sidebar">
        <ul>
            <li><a href="{% url 'admin_dashboard' %}">Dashboard</a></li>
            <li><a href="{% url 'profile' %}">Profile</a></li>
            <li><a href="{% url 'logout' %}">Logout</a></li>
        </ul>
    </div>
    <div class="content">
        <h1>Dashboard</h1>
        <div>
            <h2>IT Personnel Users</h2>
            <ul>
                {% for user in it_users %}
                    <li>{{ user.username }} ({{ user.email }})
                        <ul>
                            {% for key in it_keys.user %}
                                <li>
                                    {{ key.key }} - {{ key.status }}
                                    {% if key.status == 'active' %}
                                        <form method="post" style="display:inline;">
                                            {% csrf_token %}
                                            <input type="hidden" name="key_id" value="{{ key.id }}">
                                            <button type="submit" name="revoke_key">Revoke</button>
                                        </form>
                                    {% endif %}
                                </li>
                            {% endfor %}
                        </ul>
                    </li>
                {% empty %}
                    <li>No IT Personnel found</li>
                {% endfor %}
            </ul>
        </div>
    </div>
</body>
</html>
